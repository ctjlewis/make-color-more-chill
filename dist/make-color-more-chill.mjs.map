{"version":3,"file":"make-color-more-chill.mjs","sources":["../src/index.ts"],"sourcesContent":["import c from 'chroma-js';\nimport { z } from 'zod';\n\n// the chillThreshold is the minimum acceptable contrast ratio for a given color\n// against white, as eyeballed by @christianbaroni and @mikedemarais üëÅÔ∏è\nconst chillThreshold = 2.5;\n\nexport const black = '#000000';\nexport const white = '#ffffff';\n\nexport const Theme = z.enum(['dark', 'light']);\nexport type ThemeType = z.infer<typeof Theme>;\n\nexport const fallbackColors = {\n  [Theme.enum.dark]: '#525B66',\n  [Theme.enum.light]: '#25292E',\n};\n\nfunction incrementChillness(color: string, theme: ThemeType) {\n  const slightlyChillerColor =\n    theme === Theme.enum.dark ? c(color).brighten(0.02) : c(color).darken(0.02);\n\n  return slightlyChillerColor.saturate(0.02).hex();\n}\n\nexport function isBlackOrWhite(color: string): boolean {\n  return c(color).hex() === black || c(color).hex() === white;\n}\n\nexport function isChill(color: string, background: string = white): boolean {\n  const chillness = Number(c.contrast(color, background).toFixed(2));\n  return chillness > chillThreshold;\n}\n\nexport default function makeColorMoreChill(\n  color: string,\n  background: string = white\n) {\n  const theme =\n    c.distance(white, background) > c.distance(black, background)\n      ? Theme.enum.dark\n      : Theme.enum.light;\n\n  // Pure white and pure black do not chill well with our interfaces, lets make it more chill.\n  if (isBlackOrWhite(color)) return fallbackColors[theme];\n\n  // Return the color if it's already totally chill and doesn't need to be messed with.\n  if (isChill(color, background)) return color;\n\n  // Mess with the color just enough to make it pass the chillThreshold, but not too far past it.\n  let chillColor = color;\n  while (!isChill(chillColor, background)) {\n    // console.log('loop', chillColor);\n    chillColor = incrementChillness(chillColor, theme);\n  }\n  return chillColor;\n}\n"],"names":[],"mappings":";;;AAGA;AACA;AACA,MAAM,cAAc,GAAG,GAAG,CAAC;MAEd,KAAK,GAAG,UAAU;MAClB,KAAK,GAAG,UAAU;MAElB,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,EAAE;MAGlC,cAAc,GAAG;IAC5B,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,SAAS;IAC5B,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,SAAS;EAC7B;AAEF,SAAS,kBAAkB,CAAC,KAAa,EAAE,KAAgB;IACzD,MAAM,oBAAoB,GACxB,KAAK,KAAK,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAE9E,OAAO,oBAAoB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC;AACnD,CAAC;SAEe,cAAc,CAAC,KAAa;IAC1C,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,KAAK,KAAK,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,KAAK,KAAK,CAAC;AAC9D,CAAC;SAEe,OAAO,CAAC,KAAa,EAAE,aAAqB,KAAK;IAC/D,MAAM,SAAS,GAAG,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IACnE,OAAO,SAAS,GAAG,cAAc,CAAC;AACpC,CAAC;SAEuB,kBAAkB,CACxC,KAAa,EACb,aAAqB,KAAK;IAE1B,MAAM,KAAK,GACT,CAAC,CAAC,QAAQ,CAAC,KAAK,EAAE,UAAU,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,EAAE,UAAU,CAAC;UACzD,KAAK,CAAC,IAAI,CAAC,IAAI;UACf,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;;IAGvB,IAAI,cAAc,CAAC,KAAK,CAAC;QAAE,OAAO,cAAc,CAAC,KAAK,CAAC,CAAC;;IAGxD,IAAI,OAAO,CAAC,KAAK,EAAE,UAAU,CAAC;QAAE,OAAO,KAAK,CAAC;;IAG7C,IAAI,UAAU,GAAG,KAAK,CAAC;IACvB,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE;;QAEvC,UAAU,GAAG,kBAAkB,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;KACpD;IACD,OAAO,UAAU,CAAC;AACpB;;;;;"}